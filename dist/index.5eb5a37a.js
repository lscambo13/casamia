let e,t,o,n,l,a,s,i,c,r,d,u,m,g;const p="https://x1337x.ws/sort-category-search/",h="https://www.google.com/search?q=",f="https://www.bing.com/search?q=",y="https://duckduckgo.com/?q=",b='["--help","--dl","--clock","--countdown"]',w="./assets/wallpapers/",k={"bg-img-drop":"shown","bg-blur-drop":"off","footer-display-drop":"on","def-widget-drop":"casamia","greeting-display-drop":"on","def-widget-display-drop":"on","def-search-engine-drop":"google","searchbar-position-drop":"middle","searchbar-color-theme-drop":"glass","focus-search-drop":"off","search-display-drop":"on","movies-search-display-drop":"shown","tv-search-display-drop":"shown","games-search-display-drop":"shown","ebooks-search-display-drop":"shown","downloader-button-display-drop":"shown","add-bookmark-display-drop":"shown","bookmark-labels-display-drop":"shown"},v={show:(a=null,s=null,i=["Input A","Input B"],c="Submit",r="Cancel",d=null,u=[onInput=null,onChange=null],m=null)=>{(e=document.getElementById("inputDialogContainer"))&&e.remove(),document.activeElement.blur(),a=a?`<h3 id="inputDialogTitle" class="modalTitle">${a}</h3>`:"",s=s?`
		<h4 id="inputDialogDescription" class="modalDescription">${s}</h4>
	`:"",document.body.insertAdjacentHTML("afterbegin",`
		<div id="inputDialogContainer" class="modalContainer disable-select">
			<form autocomplete="off" action="#" class="modal">
				${a}
				${s}
				<div id="inputDialogButtonsBar" class="modalButtonsBar">
					<button
					 id="inputDialogSubmitButton"
					 class="mainButton button"
					 disabled = "true"
					 onclick=""
					 type="submit">${c}</button>
					<button
					 id="inputDialogCancelButton"
					 class="button"
					 onclick=""
					 type="button">${r}</button>
				</div>
				<form>
		</div>
	`),i.forEach(e=>{let t=e.replaceAll(" ","-").toLowerCase();t=`MODAL-INPUT-${t}`,document.getElementById("inputDialogButtonsBar").insertAdjacentHTML("beforebegin",`
					<label
					 class="label"
					 for="${t}">${e}</label>
					<input
					 class="modalInputField"
					 type="text"
					 id="${t}">
		`)}),d&&(document.getElementById("inputDialogButtonsBar").insertAdjacentHTML("beforebegin",`
					<label
					 class="label"
					 for="tickBoxField">
						<input
						class="tickBoxField"
						type="checkbox"
						id="tickBoxField">
						<span>${d}</span>
					 </label>
		`),n=document.getElementById("tickBoxField")),e=document.getElementById("inputDialogContainer"),t=document.getElementById("inputDialogSubmitButton"),o=document.getElementById("inputDialogCancelButton"),l=document.getElementsByClassName("modalInputField"),document.body.style.overflow="hidden",l[0].focus(),r||(o.style.display="none");let g=new Promise((a,s)=>{e.style.opacity="1";let i=()=>{o.removeEventListener("click",i),e.remove(),document.body.style.overflow="auto",s(Error(null))},c=()=>{t.removeEventListener("click",c),d&&(n.removeEventListener("change",u[1]),n=n.checked);let o=[];for(let e of l)o.push(e.value),u&&e.removeEventListener("input",u);let s={inputValues:o,checkboxChecked:n};e.remove(),document.body.style.overflow="auto",console.log(s),a(s)};if(o.addEventListener("click",i),t.addEventListener("click",c),u[0])for(let e of l)e.addEventListener("input",u[0]);u[1]&&d&&n.addEventListener("change",u[1])});return m&&m(),g},getSubmitButton:()=>t,getCancelButton:()=>o,getInputFields:()=>l,getCheckboxField:e=>n};function I(e){try{return new URL(e),!0}catch(e){return!1}}const E=(e,t=!1)=>{let o=v.getSubmitButton(),n=v.getInputFields();for(let e of n)if(e.value.length)o.disabled=!1;else{o.disabled=!0;return}t&&(I(n[1].value)?o.disabled=!1:o.disabled=!0)};function B(e){document.documentElement.style.setProperty("--cross-display",e)}let S=JSON.parse(localStorage.getItem("saved_bookmarks"));function L(e,t,o){document.getElementsByClassName("flex-sub-container-horizontal")[0].appendChild(function(e,t,o){let n=document.createElement("span");n.textContent=t.substring(0,3).toUpperCase(),n.className="custom_link_name";let l=document.createElement("div");l.className="cross",l.title="Modify bookmark details",l.setAttribute("tabindex","5");let a=document.createElement("a");a.className="custom_bookmark bookmark-icon clickable",a.setAttribute("href",e),a.setAttribute("id",o),a.setAttribute("tabindex","1"),a.appendChild(n),a.appendChild(l);let s=document.createElement("span");s.className="bookmark-title",s.textContent=t,"hidden"===sessionStorage.getItem("labels")&&s.classList.add("hidden");let i=document.createElement("div");return i.className="bookmark-container",i.appendChild(a),i.appendChild(s),i}(e,t,o));let n=document.getElementsByClassName("cross");n[n.length-1].addEventListener("click",T)}function x(e,t,o){S.push({link:e,name:t,id:o}),localStorage.setItem("saved_bookmarks",JSON.stringify(S))}function C(e){switch(e){case"show":B("block");break;case"hide":B("none")}}function D(e,t){let o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function T(e){e.preventDefault(),e.stopPropagation();let t=e.target.parentNode,o=function(e){let t=S.filter(t=>e==t.id);return[t[0].id,t[0].name,t[0].link]}(t.id);v.show("Edit bookmark",null,["Name","Address"],"Save","Cancel","Delete this bookmark",[()=>E(e,!0),()=>{let e=v.getCheckboxField(),t=v.getSubmitButton(),o=v.getInputFields();if(e.checked){for(let e of(t.textContent="Delete",t.classList.add("deleteButton"),o))e.disabled=!0;t.disabled=!1}else if(!e.checked)for(let e of(t.textContent="Save",t.classList.remove("deleteButton"),o))e.disabled=!1}],()=>{v.getInputFields()[0].value=o[1],v.getInputFields()[1].value=o[2]}).then(e=>{if(e.checkboxChecked){var o;o=t.id,S=S.filter(e=>o!=e.id),localStorage.setItem("saved_bookmarks",JSON.stringify(S)),t.parentNode.style.display="none";return}t.href=e.inputValues[1].replaceAll(" ",""),t.firstChild.innerHTML=e.inputValues[0].substring(0,3),t.nextSibling.innerHTML=e.inputValues[0],function(e,t,o){let n=S.filter(t=>e==t.id);n[0].name=t,n[0].link=o,localStorage.setItem("saved_bookmarks",JSON.stringify(S))}(t.id,e.inputValues[0],e.inputValues[1].replaceAll(" ",""))}).catch(e=>console.log(e))}const $={"bg-img-drop":function(e){let t=document.getElementById("overlay");switch(e){case"hidden":t.style.backgroundColor="rgba(0, 0, 0, 1)";break;case"shown":t.style.backgroundColor="rgba(0, 0, 0, 0.5)"}},"bg-blur-drop":function(e){let t=document.getElementById("overlay");switch(e){case"off":t.style.backdropFilter="blur(0em)";break;case"on":var o;t.style.backdropFilter="blur(1em)",o="overlay",document.getElementById(o).style.backdropFilter="blur(0.9em)",setTimeout(()=>{document.getElementById(o).style.backdropFilter="blur(1em)"},1)}},"footer-display-drop":function(e){let t=document.getElementById("footer");switch(e){case"off":t.classList.add("hidden");break;case"on":t.classList.remove("hidden")}},"def-widget-drop":function(e){function t(e){switch(e){case"show":document.getElementById("update-customtext-btn").classList.remove("nested-close");break;case"hide":document.getElementById("update-customtext-btn").classList.add("nested-close")}}switch(e){case"casamia":t("hide"),ee("off"),A("Casa Mia");break;case"search":t("hide"),ee("off"),A("Search");break;case"clock":t("hide"),ee("on");break;case"custom":let o;ee("off"),t("show"),null==(o=localStorage.getItem("customWidgetText"))&&(localStorage.setItem("customWidgetText","Custom Text"),o=localStorage.getItem("customWidgetText"),M()),A(o)}},"greeting-display-drop":function(e){let t=document.getElementById("subtitle");switch(clearInterval(F),e){case"off":t.classList.add("collapsed");break;case"on":t.classList.remove("collapsed"),et(),F=setInterval(et,2e4)}},"def-widget-display-drop":function(e){let t=document.getElementById("main-heading-slider"),o=document.getElementById("left-arrow"),n=document.getElementById("right-arrow");function l(e){switch(e){case"show":document.getElementById("main-widget-children-container").classList.remove("nested-close");break;case"hide":document.getElementById("main-widget-children-container").classList.add("nested-close")}}switch(e){case"off":t.classList.add("hidden"),o.classList.add("hidden"),n.classList.add("hidden"),l("hide");break;case"on":t.classList.remove("hidden"),o.classList.remove("hidden"),n.classList.remove("hidden"),l("show")}},"def-search-engine-drop":function(e){function t(e){document.getElementById("search-btn-icon").className=e,localStorage.setItem("default-search-icon",e)}function o(e){switch(e){case"show":document.getElementById("update-customdomain-btn").classList.remove("nested-close");break;case"hide":document.getElementById("update-customdomain-btn").classList.add("nested-close")}}switch(e){case"google":o("hide"),O(h),t("fa-brands fa-google");break;case"bing":o("hide"),O(f),t("fa fa-magnifying-glass");break;case"duckduckgo":o("hide"),O(y),t("fa fa-magnifying-glass");break;case"custom":let n;o("show"),null==(n=localStorage.getItem("customDomain"))&&(localStorage.setItem("customDomain",h),n=localStorage.getItem("customDomain"),_()),O(n),t("fa fa-magnifying-glass")}},"searchbar-position-drop":function(e){let t=document.getElementById("searchbar"),o=document.getElementById("autofillContainer"),n=document.getElementById("wrap");switch(sessionStorage.setItem("searchbar-position-drop",e),e){case"top":t.style.order="0",o.style.order="1",o.style.bottom="0em",o.style.top="3.75em",n.style.margin="0 auto auto auto";break;case"bottom":t.style.order="1",o.style.order="0",o.style.bottom="3.75em",o.style.top="",n.style.margin="auto auto 0 auto";break;case"middle":t.style.order="0",o.style.order="1",o.style.bottom="0em",o.style.top="3.75em",n.style.margin="auto auto auto auto"}},"searchbar-color-theme-drop":function(e){let t=document.getElementById("searchContainer");switch(sessionStorage.setItem("searchbar-color-theme-drop",e),e){case"glass":t.classList.add("searchbox-style-glass"),t.classList.remove("searchbox-style-light"),t.classList.remove("searchbox-style-dark");break;case"light":t.classList.remove("searchbox-style-glass"),t.classList.add("searchbox-style-light"),t.classList.remove("searchbox-style-dark");break;case"dark":t.classList.remove("searchbox-style-glass"),t.classList.remove("searchbox-style-light"),t.classList.add("searchbox-style-dark")}},"focus-search-drop":function(e){sessionStorage.setItem("focus",e)},"search-display-drop":function(e){let t=document.getElementById("searchbar"),o=document.getElementById("search-display-children-container"),n=document.getElementById("def-search-engine-drop-container");function l(e){switch(e){case"show":o.classList.remove("nested-close"),n.classList.remove("nested-close");break;case"hide":o.classList.add("nested-close"),n.classList.add("nested-close")}}switch(e){case"off":t.classList.add("hidden"),l("hide");break;case"on":t.classList.remove("hidden"),l("show")}},"movies-search-display-drop":function(e){let t=document.getElementById("movies-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"tv-search-display-drop":function(e){let t=document.getElementById("tv-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"games-search-display-drop":function(e){let t=document.getElementById("games-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"ebooks-search-display-drop":function(e){let t=document.getElementById("ebooks-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"downloader-button-display-drop":function(e){let t=document.getElementById("downloader-button");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"add-bookmark-display-drop":function(e){let t=document.getElementById("add_bookmark_button");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"bookmark-labels-display-drop":function(e){let t=document.getElementsByClassName("bookmark-title");switch(sessionStorage.setItem("labels",e),e){case"hidden":for(let e of t)e.classList.add("hidden");break;case"shown":for(let e of t)e.classList.remove("hidden")}}},N=document.getElementsByClassName("widget-slide");function A(e){for(let t of N)t.textContent=e}function M(){let e=localStorage.getItem("customWidgetText");v.show("Custom widget text","Enter text you want to set as the main widget.",["Custom text"],"Save","Cancel",null,[E,null],()=>{v.getInputFields()[0].value=e}).then(e=>{localStorage.setItem("customWidgetText",e.inputValues[0]),A(e.inputValues[0]),H()}).catch(e=>{console.error(e)})}function _(){let e=localStorage.getItem("customDomain");v.show("Custom widget text","Enter text you want to set as the main widget.",["Custom text"],"Save","Cancel",null,[E,null],()=>{v.getInputFields()[0].value=e}).then(e=>{localStorage.setItem("customDomain",e.inputValues[0]),O(e.inputValues[0]),V()}).catch(e=>{console.error(e)})}let F=null;function O(e){localStorage.setItem("default-search-url",e)}function j(){for(let e of Object.entries(JSON.parse(localStorage.getItem("advDropdownValues")))){let t=$[e[0]];t&&t(e[1])}P(),H(),V();let e=sessionStorage.getItem("input");e&&(document.getElementById("searchTerm").value=e)}function P(){document.getElementById("update-username-btn-preview").textContent=localStorage.getItem("userName")}function H(){document.getElementById("update-customtext-btn-preview").textContent=localStorage.getItem("customWidgetText")}function V(){document.getElementById("update-customdomain-btn-preview").textContent=localStorage.getItem("customDomain")}const U=`The command you have passed is invalid.

Type --help to read the documentation.
`,q=`This will reset bookmarks.
Make sure you have a backup to import later on.


Are you sure ?`,J=`This will reset everything.
There is no going back.

Are you sure?`;function R(e){return 1==e.length&&(e="0"+e),e}const W={show:(e=null,t=null,o=["Submit A","Submit B"],n="Ok",l=[null,null],r=[],d=null)=>{(a=document.getElementById("alertDialogContainer"))&&a.remove(),e=e?`<h3 id="alertDialogTitle" class="modalTitle">${e}</h3>`:"",t=t?`
		<h4 id="alertDialogDescription" class="modalDescription">${t}</h4>
	`:"",document.body.insertAdjacentHTML("afterbegin",`
		<div id="alertDialogContainer" class="modalContainer">
			<div class="modal">
				${e}
				${t}
				<div id="alertDialogButtonsBar" class="modalButtonsBar disable-select">
					<button
					 id="alertDialogCancelButton"
					 class="button"
					 onclick=""
					 type="button">${n}</button>
				</div>
			</div>
		</div>
	`),o&&o.forEach(e=>{let t=e.replaceAll(" ","-").toLowerCase();t=`ALERT-BUTTON-${t}`,document.getElementById("alertDialogButtonsBar").insertAdjacentHTML("afterbegin",`
			<button
			id="${t}"
			class="alertDialogSubmitButton button">
			${e}</button>
			`)}),l[0]&&(document.getElementById("alertDialogButtonsBar").insertAdjacentHTML("beforebegin",`
					<label
					 class="label"
					 for="tickBoxField">
						<input
						class="tickBoxField"
						type="checkbox"
						id="tickBoxField">
						<span>${l[0]}</span>
					 </label>
		`),i=document.getElementById("tickBoxField")),a=document.getElementById("alertDialogContainer"),s=document.getElementById("alertDialogCancelButton"),c=document.getElementsByClassName("alertDialogSubmitButton"),document.body.style.overflow="hidden",s.focus();let u=new Promise((e,t)=>{a.style.alignItems="center",a.style.opacity="1";let o=()=>{s.removeEventListener("click",o),l[0]&&(i.removeEventListener("change",l[1]),i=i.checked),r&&r.forEach((e,t)=>{c[t].removeEventListener("click",e)}),a.remove(),document.body.style.overflow="auto",e(i)};s.addEventListener("click",o),r&&r.forEach((e,t)=>{c[t].addEventListener("click",e)}),l[0]&&i.addEventListener("change",l[1])});return d&&d(),u},getCancelButton:()=>s,getSubmitButtons:()=>c,getCheckboxField:()=>i},Y=(e,t)=>{W.show(e,t,null,"Ok",[null,null],null,null).then(e=>console.log(e)).catch(e=>console.error(e))};function z(e,t){let o=document.getElementById("gradient_overlay"),n=document.getElementById("wallpapers"),l=localStorage.getItem("glow");null!=t&&"1"!=l&&(o.style.opacity=t),null!=e&&(n.style.background=`linear-gradient(to top, rgb(${e}), 50%, #fbd3e900)`,o.style.background=`linear-gradient(to top, rgb(${e}), 50%, #fbd3e900)`)}let G=[];function Q(e,t){r=e,document.getElementById("overlay").style.backdropFilter="blur(1em)";let o=new Image;o.src=w+e,o.onload=e=>{K(r),localStorage.setItem("wallpaper",r),j()},z(t),function(e){let t=document.getElementsByClassName("has-shadow");for(let o=0;o<t.length;o++)t[o].style.textShadow=`4px 4px 0 rgba(${e},.85), 6px 6px 0px black`}(t),document.documentElement.style.setProperty("--selection-color",`rgba(${t}, .5)`),K(e.split(".").join("-thumb."))}function K(e){document.body.style.backgroundImage="url("+w+e+")",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize="cover",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundPosition="center"}function X(){for(let e of document.getElementsByClassName("thumb-group")){let t=e.getElementsByClassName("thumbnail")[0],o=e.getElementsByClassName("thumb-title")[0];e.classList.add("animate"),t.src.replace("-thumb","").includes(r)?(o.style.opacity="1",e.classList.remove("animate"),e.classList.add("highlighted")):(o.style.opacity="0",e.classList.add("animate"),e.classList.remove("highlighted"))}}let Z=null;function ee(e){switch(e){case"off":clearInterval(Z),Z=null;break;case"on":Z&&clearInterval(Z),Z=setInterval(()=>(function(e){let t=document.getElementsByClassName(e),o=new Date,n=o.getHours(),l=e=>0==e?(n.toString(),n="12","AM"):e>0&&e<12?(n=R(n.toString()),"AM"):12==e?(n="12","PM"):e>12?((n-=12).toString(),n=R(n),"PM"):void 0,a=R(o.getMinutes().toString()),s=R(o.getSeconds().toString());l=l(n);let i=":";for(let e=0;e<t.length;e++)i=s%2==0?'<span class="separator separator-visible">:</span>':'<span class="separator">:</span>',t[e].innerHTML=`${n}${i}${a} ${function(e){let t=localStorage.getItem("selected-widget-style");return"widget-2"==t||"widget-7"==t||"widget-5"==t?e.toLowerCase():e}(l.toString())}`})("widget-slide"),1e3)}}function et(){let e=document.getElementById("subtitle"),t=localStorage.getItem("userName"),o=new Date().getHours(),n=e=>e<12?`Good Morning, ${t}`:e>=12&&e<=18?`Good Afternoon, ${t}`:e>=18?`Good Evening, ${t}`:void 0;n=n(o),e.innerText=n}function eo(e,t=""){let o;e?(e.stopPropagation(),o=e.target.files[0].text()):o=t,o.then(function(t){let o=JSON.parse(t);if(!o[0]?.id){console.log(o),Y("Failed","The backup does not seem to be valid."),e.target.value=null;return}let n=[];for(let e of S)n.push(e.id);for(let e of o)n.includes(e.id)&&(function(e){let t=Date.now(),o=t+1;for(;t<o;)t=Date.now()}(0),e.id=Date.now()),n.push(e.id),x(e.link,e.name,e.id);window.location.reload()})}function en(e){confirm(q)&&(localStorage.removeItem("saved_bookmarks"),window.location.reload())}function el(e){confirm(J)&&(localStorage.clear(),window.location.reload())}function ea(){return document.getElementsByClassName("searchTerm")[0]}function es(e,t,o){if(null!=t)return document.getElementById(e).addEventListener(t,o,{passive:!0})}function ei(e,t,o){let n=document.getElementsByClassName(e);for(let e=0;e<n.length;e++)n[e].addEventListener(t,o)}function ec(e){("Enter"===e.key||" "===e.key)&&e.target.click()}function er(){fetch("./assets/samples/bookmarks.json").then(e=>eo(null,e.text()))}function ed(e){let t=document.getElementsByClassName("arrows");switch(e){case"show":for(let e=0;e<t.length;e++)t[e].style.height="2em";break;case"hide":for(let e=0;e<t.length;e++)t[e].style.height="0em"}}function eu(e,t){let o;let n=document.getElementById("main-heading-slider"),l=n.scrollWidth,a=document.getElementsByClassName(e),s=n.scrollLeft,i=n.scrollWidth/a.length;1==t?((o=s+i)>l&&(o=l),console.log(o),n.scrollLeft=o):-1==t&&((o=s-i)<0&&(o=0),console.log(o),n.scrollLeft=o)}const em=document.getElementById("notifyContainer"),eg={show:(e,t="5000",o=null)=>{let n=Date.now();(m=document.getElementById(`notifyModal-${n}`))&&m.parentNode.remove(),em.insertAdjacentHTML("afterbegin",`
		<div id="notifyModal-${n}" class="notifyModal">
			<div class="notifyDescriptionContainer">
				<h3 id="notifyDescription-${n}" class="notifyDescription">
					${e}
				</h3>
				<hr id="notifyLoader-${n}" class="notifyLoader">
			</div>	
			<button id="notifyDialogCancelButton-${n}" class="button tinyButton">
				x
			</button>
		</div>
	`);let l=document.getElementById(`notifyLoader-${n}`);m=document.getElementById(`notifyModal-${n}`),o&&m.addEventListner("click",o);let a=e=>{o&&m.removeEventListner("click",o),u.removeEventListener("click",a),e.target.parentNode.remove()};(u=document.getElementById(`notifyDialogCancelButton-${n}`)).addEventListener("click",a),setTimeout(()=>{let e=u;setTimeout(()=>{e.click()},t),l.style.transition=t+"ms",m.style.opacity="1",m.style.marginTop="2em",l.style.width="0%"},50)}},ep=document.getElementById("advanced-settings-modal-background-overlay"),eh=document.getElementById("wrap"),ef=document.getElementById("downloadContainer"),ey=document.getElementById("progress-bar"),eb=(e,t)=>`
	<div>
		<a href="${e}" class="premiumDownloadButton">
			<span class="videoResolution">${t}</span>
		</a>
	</div>
	`,ew=(e,t)=>{let o=new Set;t[0].forEach(e=>{e<720?o.add("SD"):e<1080?o.add("HD"):e<1440?o.add("FHD"):e<2160?o.add("QHD"):e<4320?o.add("UHD"):e>=4320&&o.add("UHD+")});let n=`
		<div>
			<a href="${e}" class="premiumDownloadButton">
				<span class="videoResolution">MP3</span>
			</a>
		</div>
	`;return o.forEach(t=>{n=eb(e,t)+n}),n},ek=e=>{let t="";return Object.keys(e).forEach(o=>{let n;e[o].stream.length&&(n="bestVideoOnly"===o?`${e[o].info}P MUTED`:"NA"===e[o].info?"AUDIO":`${e[o].info}P`)&&(t+=eb(e[o].stream,n))}),t},ev=(e,t,o,n)=>{let l=ek(t),a=ew("#",n);ef.insertAdjacentHTML("beforeend",`
		<div class="downloadItemContainer">
			<video 
				controls disablepictureinpicture
				controlslist="noplaybackrate" 
				src="${t.bestVideoWithAudio.stream}" alt="Thumbnail"
				poster="${o}"
				class="downloadItemThumbnail">
			</video>
			<div class="downloadInfoContainer">
				<span class="downloadItemTitle">${e}</span>
			</div>
			<div class="proDownloadContainer">
				<span class="proDownloadContainerLabel
					premiumDownloadButton">FREE</span>
				<div class="proDownloadOptions">
					${l}
				</div>
			</div>
			<div class="proDownloadContainer disabled" >
				<span class="proDownloadContainerLabel
					premiumDownloadButton">PRO</span>
				<div class="proDownloadOptions">
					${a}
				</div>
			</div>
		</div>
	`)},eI=()=>{for(let e of document.querySelectorAll(".downloadItemContainer"))e.remove()},eE=()=>{ey.classList.remove("hidden"),ef.classList.add("hidden"),ef.removeEventListener("click",eE),eI(),document.title=document.title.replace("Downloader","Search"),history.pushState({loc:"home"},"","?home"),document.body.classList.remove("justifySpaceBetween"),eh.style.display="block",ep.style.display="none"},eB=(e,t=null)=>{if(!t){let e=ea().value;if(I(e))t=e;else{eg.show("You need to enter a website link first");return}}history.pushState({loc:"downloader"},"","?downloader"),document.title=document.title.replace("Search","Downloader"),document.body.classList.add("justifySpaceBetween"),eh.style.display="none",ey.classList.remove("hidden"),ep.style.display="block",window.scrollTo(0,0),document.querySelector("#searchBarFocusMode").click(),ef.classList.remove("hidden"),es("downloadContainer-close-btn","click",eE),fetch(`https://casamia.cambo.in/api/getInfo/?url=${t}`).then(e=>{if(200!==e.status){e.json().then(t=>{t[0]?.err?Y(`Error ${e.status} ${e.statusText}`,t[0].err):Y(`Unknown Error ${e.status} ${e.statusText}`,t.stderr),eE()});return}e.json().then(e=>{console.log(e),e.forEach(e=>{if(ey.classList.add("hidden"),!e.resolutions.length){Y("Something went wrong",e.err),eE();return}ev(e.title,e.streams,e.thumbnail,e.resolutions),console.log(e.source,e.err)})})}).catch(e=>{Y("Fatal Error",e),eE()})};function eS(e){return!!e.startsWith("--")}function eL(e,t){let o=t.substr(4);(o=o.split(",")).forEach(t=>{if(null==window.open(`${e}${t}`,"_blank")){Y("Information","Allow pop-ups for this feature to work properly.");return}})}const ex="You must enter a search query to continue.",eC=document.querySelector(".autofillContainer"),eD=document.querySelector("#searchBarFocusMode");let eT="",e$=[];window.googleSuggestions=e=>{e$=[];let t=ea().value;e$=e[1],t&&(eO(t,e$),e_(t))};const eN=e=>{""!==eT&&document.body.removeChild(eT),(eT=document.createElement("script")).src=`https://suggestqueries.google.com/complete/search?client=firefox&callback=googleSuggestions&q=${e}`,document.body.appendChild(eT)},eA=e=>{let t=document.getElementById("search-btn-icon"),o=localStorage.getItem("default-search-icon");if(I(e)){t.className="fa fa-globe";return}if(eS(e)){t.className="fa fa-terminal";return}t.className=o},eM=()=>{eD.style.opacity="0",eC.style.paddingBlock="0em",eC.style.height="0px",setTimeout(()=>{eD.style.display="none"},200)},e_=e=>{let t=document.querySelectorAll(".autofillItem"),o=document.getElementById("searchbar");e.length&&(eD.style.display="block",setTimeout(()=>{if(t.length){let e=t[0].getBoundingClientRect(),n=e.height*t.length+1.5*e.height;eC.style.height=`${n}px`,eC.style.paddingBlockStart="0em",o.scrollIntoView()}eD.style.opacity="1",document.getElementById("downloadContainer").classList.contains("hidden")||eM()},1))},eF=()=>{document.querySelectorAll(".autofillItem").forEach(e=>{e.remove()})},eO=(e,t)=>{let o=JSON.parse(localStorage.getItem("autocompleteDatabase"));function n(e){ea().value=e.target.innerText;let t=new InputEvent("input");ea().dispatchEvent(t),ea().focus()}o||localStorage.setItem("autocompleteDatabase",b),(o=>{if(eF(),!e)return;let n=sessionStorage.getItem("searchbar-color-theme-drop");"bottom"==sessionStorage.getItem("searchbar-position-drop")?eC.style.flexDirection="column-reverse":eC.style.flexDirection="column";let l=0;for(let e of o){if(6==l)break;eC.insertAdjacentHTML("beforeend",`
				<span 
                    class="autofillItem disable-select searchbox-style-${n}"
                    tabindex="1">
                        <span class="autofillItemText"></span>
                        <span class="autofillItemRem fa-solid fa-xmark"></span>
                    </span>
            `);let t=document.getElementsByClassName("autofillItemText");t[t.length-1].innerText=e,t[t.length-1].title=e,l++}for(let e of t){if(10==l)break;eC.insertAdjacentHTML("beforeend",`
        		<span 
                    class="autofillItem disable-select searchbox-style-${n}"
                    tabindex="1" title="${e}">
                    <span class="autofillItemText">${e}</span>
                    </span>
            `),l++}})(o.filter(t=>{if(t.toLowerCase()!=e.toLowerCase())return t.toLowerCase().includes(e.toLowerCase())})),document.querySelectorAll(".autofillItem").forEach(e=>{e.addEventListener("click",n),e.addEventListener("keydown",ec)}),document.querySelectorAll(".autofillItemRem").forEach(e=>{e.addEventListener("click",eP)})},ej=e=>{let t=JSON.parse(localStorage.getItem("autocompleteDatabase")),o=new Set(t);o.add(e);let n=Array.from(o);localStorage.setItem("autocompleteDatabase",JSON.stringify(n))},eP=e=>{let t=e.target.parentNode.children[0].innerText,o=JSON.parse(localStorage.getItem("autocompleteDatabase")),n=new Set(o);console.log(n.delete(t));let l=Array.from(n);localStorage.setItem("autocompleteDatabase",JSON.stringify(l))};let eH=null;function eV(){eH&&eH.classList.toggle("loader"),eH=null}function eU(){let e=localStorage.getItem("userName");if(e){v.show("Update your name","Maximum length allowed is 17 characters.",["Change name to"],"Update","Cancel",null,[E,null],()=>{v.getInputFields()[0].setAttribute("maxlength",17),v.getInputFields()[0].value=e}).then(t=>{e=t.inputValues[0],localStorage.setItem("userName",e),P(),et()}).catch(e=>{console.error(e)});return}if(!e){let t=v.show("Welcome to Casa Mia",`Hi! We are so excited to see you here.
            Please fill out the following details before moving forward. `,["Your name"],"Proceed",null,null,[E,null],()=>{v.getInputFields()[0].setAttribute("maxlength",17)});return t.then(t=>{e=t.inputValues[0],localStorage.setItem("userName",e),localStorage.setItem("onBoarding","1")}).catch(e=>{console.error(e)}),t}}function eq(){let e=document.getElementsByTagName("select"),t={};for(let o of e)t[o.id]=o.value;localStorage.setItem("advDropdownValues",JSON.stringify(t)),j()}function eJ(e){document.documentElement.style.setProperty("--blur-one-em",`blur(${e}em)`),document.documentElement.style.setProperty("--blur-one-px",`blur(${e}px)`)}let eR=!1;function eW(){let e=new Date;11==e.getMonth()&&e.getDate()>17&&32>e.getDate()&&function(){let e=document.getElementById("canvasFar"),t=e.getContext("2d"),o=window.innerWidth,n=window.innerHeight;e.width=o,e.height=n;let l=[];for(let e=0;e<50;e++)l.push({x:Math.random()*o,y:Math.random()*n,r:4*Math.random()+1,d:50*Math.random()});t.fillStyle="rgba(255, 255, 255, 0.5)",e.style.display="block",eR=!1,window.requestAnimationFrame(function e(){t.clearRect(0,0,o,n),t.beginPath();for(let e=0;e<50;e++){let o=l[e];t.moveTo(o.x,o.y),t.arc(o.x,o.y,o.r,0,2*Math.PI,!0)}t.fill(),function(){for(let e=0;e<50;e++){let t=l[e];t.y+=Math.cos(t.d)+1+t.r/10,(t.x>o+5||t.x<-5||t.y>n)&&e%3>0&&(l[e]={x:Math.random()*o,y:-10,r:t.r,d:t.d})}}(),eR||window.requestAnimationFrame(e)})}()}const eY=()=>{let e=new Date().getFullYear(),t=document.getElementById("copyright-text");t.title=`\u00A9 ${e} lscambo13`,t.innerText=`\u00A9 ${e} lscambo13`},ez=document.getElementById("wallpapers"),eG=document.getElementById("wrap"),eQ=document.getElementById("toggle-labs-btn"),eK=document.getElementById("advanced-settings-modal"),eX=document.getElementById("advanced-settings-modal-background-overlay");let eZ=!1,e0=!1;const e1=e=>{switch(eV(),e){case"close":document.title=document.title.replace("Backgrounds","Search"),history.pushState({loc:"home"},"","?home"),ez.classList.remove("animation_slide_up"),setTimeout(()=>eQ.classList.remove("advanced-settings-button-right"),350),ez.classList.add("animation_slide_down"),eG.classList.remove("animation2_slide_up"),eG.classList.add("animation2_slide_down"),clearTimeout(g),C("hide"),ed("hide"),z(null,0),setTimeout(()=>eJ(1),400),e0=!1;break;case"open":ez.style.display="flex",eJ(0),ez.classList.remove("animation_slide_down"),ez.classList.add("animation_slide_up"),eG.classList.remove("animation2_slide_down","startup_slide_down"),eG.classList.add("animation2_slide_up"),setTimeout(()=>{eQ.classList.add("advanced-settings-button-right"),function(){let e=document.getElementsByClassName("highlighted")[0];setTimeout(()=>{e&&e.scrollIntoView({inline:"center"})},10)}()},350),z(null,1),g=setTimeout(()=>C("show"),450),ed("show"),document.title=document.title.replace("Search","Backgrounds"),history.pushState({loc:"backgrounds"},"","?backgrounds"),e0=!0}};function e5(){e1("close"),history.pushState({loc:"settings"},"","?settings"),setTimeout(()=>eJ(0),420),document.title=document.title.replace("Search","Settings"),document.body.classList.add("justifySpaceBetween"),eG.style.display="none",eK.style.display="block",eX.style.display="block",eZ=!0}function e2(){document.title=document.title.replace("Settings","Search"),history.pushState({loc:"home"},"","?home"),document.body.classList.remove("justifySpaceBetween"),eG.style.display="block",eK.style.display="none",eX.style.display="none",setTimeout(()=>eJ(1),100),eZ=!1}window.createNewBookmark=()=>{let e=`
	You may only use upto four letters as the bookmark name.`;v.show("Add new bookmark",e,["Bookmark name","Link to website"],"Save",void 0,null,[()=>E(null,!0),null],()=>{v.getInputFields()[0].setAttribute("placeholder","e.g. YT");let e=v.getInputFields()[1];e.setAttribute("placeholder","e.g. youtube.com"),e.value="https://",navigator.clipboard.readText().then(t=>{I(t)&&(e.value=t.replaceAll(" ",""))}).catch(e=>{console.log(e)})}).then(e=>{let t=Date.now(),o=e.inputValues[0],n=e.inputValues[1].replaceAll(" ","");n.startsWith("http")||(n=`https://${n}`),L(n,o,t),x(n,o,t)}).catch(e=>console.log(e))},window.changeWallpaper=e=>{var t;e.stopPropagation();let o=e.target.title;o||(o=e.target.childNodes[1].title);let n=(t=o,[G.filter(e=>e.title==t)[0].file,G.filter(e=>e.title==t)[0].color[1]]);Q(n[0],n[1]),X()},es("export-bookmarks-btn","click",function(e){e.stopPropagation();let t=localStorage.saved_bookmarks,o=new Date;D(`casamia-bookmarks-only-${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}.json`,t)}),es("import-bookmarks-btn","change",eo),es("export-backup-btn","click",function(e){e.stopPropagation();let t=JSON.stringify({...localStorage}),o=new Date;D(`casamia-full-backup-${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}.json`,t)}),es("import-backup-btn","change",function(e,t=""){let o;e?(e.stopPropagation(),o=e.target.files[0].text()):o=t,o.then(function(t){let o=JSON.parse(t);if(o.onBoarding){let e=Object.keys(o);e.forEach((t,n)=>{localStorage.setItem(t,o[e[n]])}),window.location.reload()}else console.log(o),Y("Failed","The backup does not seem to be valid."),e.target.value=null})}),es("download-wallpaper-btn","click",function(){let e=document.createElement("a"),t=function(e,t){let o=e.split(".");return o[o.length-1]="png",o.join(".")}(r,0);e.setAttribute("href","./assets/wallpapers-hi-res/"+t),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}),es("toggle-favicons-btn","click",function(e){let t=document.getElementsByClassName("custom_bookmark"),o=document.getElementsByClassName("custom_link_name");for(let e=0;e<t.length;e++){o[e].style.display="none";let n=document.createElement("img");n.className="ext_favicon";let l=t[e].href;n.src="http://www.google.com/s2/favicons?sz=32&domain="+l,t[e].appendChild(n)}}),es("update-username-btn","click",eU),es("update-customtext-btn","click",M),es("deep-search-btn","click",e=>{!function(e){document.getElementById(e).classList.toggle("nested-close")}("deep-search-nested");let t=document.getElementById("deep-search-btn-arrow");t.classList.toggle("fa-angle-down"),t.classList.toggle("fa-angle-up")}),es("update-customdomain-btn","click",_),es("fetch-bookmarks-btn","click",er),es("reset-bookmarks-btn","click",en),es("reset-all-btn","click",el),es("modal-close-btn","click",e2),es("toggle-labs-btn","click",e5),es("search-btn","click",function(){let e=ea().value;if(""!=e){if(ej(e),I(e)&&!e.includes(" ")){window.open(e,"_self");return}if(eS(e))!function(e){let t=e.toLowerCase();t=(t=t.split("--").join("")).split(" ");let o=e.split("--").join("").split(" ");switch(t[0]){case"help":window.open("/pages/help/index.html","_self");break;case"reset":"bookmarks"==t[1]?en():"history"==t[1]?(localStorage.setItem("autocompleteDatabase",b),window.location.reload()):"all"==t[1]?el():Y("Error",U);break;case"fetch":"default"==t[1]?er():Y("Error",U);break;case"dl":t[1]?eB(null,o[1]):Y("Failed","Enter a valid YT address");break;case"clock":window.open("./pages/clock","_self");break;case"count":window.open("./pages/countdown","_self");break;case"g":eL(h,e);break;case"b":eL(f,e);break;case"d":eL(y,e);break;default:Y("Error",U)}}(e);else{let t;e=encodeURIComponent(e);let o=(null==(t=localStorage.getItem("default-search-url"))&&(localStorage.setItem("default-search-url",h),t=localStorage.getItem("default-search-url")),t+e);window.open(o,"_self")}}else eg.show(ex)}),es("movies-search","click",function(){let e=ea().value;if(""!=e){let t=p+(e=encodeURIComponent(e))+"/Movies/time/desc/1/";window.open(t)}else eg.show(ex)}),es("tv-search","click",function(){let e=ea().value;if(""!=e){let t=p+(e=encodeURIComponent(e))+"/TV/size/desc/1/";window.open(t)}else eg.show(ex)}),es("games-search","click",function(){let e=ea().value;if(""!=e){let t=p+(e=encodeURIComponent(e))+"/Games/time/desc/1/";window.open(t)}else eg.show(ex)}),es("ebooks-search","click",function(){let e=ea().value;if(""!=e){let t=p+(e=encodeURIComponent(e))+"/Other/seeders/desc/1/";window.open(t)}else eg.show(ex)}),es("downloader-button","click",eB),es("searchTerm","input",function(e){let t=sessionStorage.getItem("input"),o=e.target.value;if(sessionStorage.setItem("input",o),eA(o),!o){eF(),setTimeout(()=>{eM()},1);return}e_(o),o!=t&&eN(o)}),es("searchTerm","click",()=>{let e=new InputEvent("input");ea().dispatchEvent(e)}),es("searchBarFocusMode","click",eM),es("searchTerm","keypress",function(e){"Enter"==e.key&&document.querySelector("#search-btn").click()}),es("fetch-bookmarks-btn","click",er),es("left-arrow","click",e=>{e.stopPropagation(),eu("widget-slide",-1)}),es("right-arrow","click",e=>{e.stopPropagation(),eu("widget-slide",1)}),window.addEventListener("resize",()=>{j(),eW()}),window.addEventListener("blur",()=>{eV()}),window.addEventListener("appinstalled",e=>{console.log("installed")}),onload=e=>{document.getElementById("main-heading-slider").classList.remove("nowrap")},es("settings_button","click",e=>{e0?e1("close",e):e0||e1("open",e)});const e3=()=>{let e;let t=document.body,o=()=>{clearInterval(e),e=null},n=t=>{["gradient_overlay","wrap","bookmarks","autofillContainer","flex-main-container-vertical","subtitle","footer"].includes(t.target.id)&&(e=setInterval(()=>{e0?e1("close"):e0||e1("open"),o()},e0?1:250))};return t.addEventListener("mousedown",n),t.addEventListener("mouseup",o),t.addEventListener("mouseout",o),t.addEventListener("touchstart",n),t.addEventListener("touchend",o),t.addEventListener("touchcancel",o),()=>{t.removeEventListener("mousedown",n),t.removeEventListener("mouseup",o),t.removeEventListener("mouseout",o),t.removeEventListener("touchstart",n),t.removeEventListener("touchend",o),t.removeEventListener("touchcancel",o),console.log("un-focus",e)}},e4=()=>{window.addEventListener("popstate",e=>{e0?e1("close"):eZ?e2():e0||eZ||(history.go(-1),console.log("cant go back anymore",-history.length-1))});let e=window.location.href;(e=e.split("/?")[1])?"settings"==e?e5():"backgrounds"==e&&e1("open"):history.pushState({loc:"home"},"","?home")},e7=()=>{let e;let t=document.getElementById("btn-install");j(),function(){if(null==S){S=[];return}for(let e of S)L(e.link,e.name,e.id)}(),function(){for(let e of Object.entries(JSON.parse(localStorage.getItem("advDropdownValues")))){let t=document.getElementById(e[0]);t&&(t.value=e[1])}}(),eG.style.opacity=1,fetch(w+"wallpapers_list.json").then(e=>{e.text().then(e=>{G=JSON.parse(e),r=localStorage.getItem("wallpaper"),d=G.filter(e=>e.file==r)[0].color[1],Q(r,d),function(){let e=document.getElementById("wallpapers");for(let t of G){let o=t.file;o=o.split(".").join("-thumb.");let n=document.createElement("div");n.className="thumb-group",n.setAttribute("onclick","changeWallpaper(event)"),n.setAttribute("onkeypress","click_to_enter(event)"),n.setAttribute("tabindex","3");let l=document.createElement("div");l.innerHTML=t.title,l.className="thumb-title",n.appendChild(l);let a=document.createElement("img");a.src=w+o,a.className="thumbnail",a.title=t.title,a.setAttribute("draggable","false"),n.appendChild(a),e.appendChild(n)}}(),X()})}).catch(e=>{console.log(e),window.open("./pages/error","_self")}),X(),e3(),ei("clickable","keypress",ec),ei("bookmark-container","click",e=>{let t=e.target.closest(".bookmark-container").querySelector("a");t.href&&(eH=t,t.classList.toggle("loader"),window.open(t.href,"_self"))}),function(e,t,o){let n=document.getElementsByTagName(e);for(let e=0;e<n.length;e++)n[e].addEventListener(t,o)}("select","change",eq),es("btn-install","click",t=>{e.prompt(),e.userChoice.then(t=>{"accepted"===t.outcome&&console.log("user accepted prompt"),e=null})}),window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),e=o,t.style.display="block"}),"1"==document.getElementById("searchbar").style.order&&window.scrollTo(0,document.body.scrollHeight),"on"==sessionStorage.getItem("focus")&&(document.getElementById("searchTerm").focus(),document.getElementById("searchTerm").click()),function(e){fetch("https://api.github.com/repos/lscambo13/casamia/commits/HEAD").then(t=>{t.json().then(t=>{let o=new Date(t.commit.committer.date).toISOString();o=(o=o.slice(0,o.length-5)).replaceAll("T","-").replaceAll(":","").replaceAll("-","."),document.getElementById(e).innerHTML=`Version ${o}`}).catch(e=>{console.error("getLastUpdated",e)})}).catch(e=>{console.error("getLastUpdated",e)})}("version-preview"),eW(),document.getElementById(localStorage.getItem("selected-widget-style")).scrollIntoView({behavior:"instant"}),setTimeout(()=>{!function(e,t){let o=document.getElementsByClassName(t),n={root:document.getElementById(e),rootMargin:"0px",threshold:.5},l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&localStorage.setItem("selected-widget-style",e.target.id)})},n);for(let e of o)l.observe(e)}("main-heading-slider","widget-slide")},500),e4()};document.addEventListener("DOMContentLoaded",()=>{eY(),"1"==localStorage.getItem("onBoarding")?(e7(),console.log("Already onboard.")):(console.log("Onboarding..."),(function(){let e=eU();return localStorage.setItem("onBoarding","0"),localStorage.setItem("advDropdownValues",JSON.stringify(k)),localStorage.setItem("wallpaper","085.webp"),localStorage.setItem("autocompleteDatabase",b),localStorage.setItem("selected-widget-style","widget-1"),e})().then(()=>{window.matchMedia("(hover: none)").matches&&setTimeout(()=>{Y("Information","Press and hold on empty area to open settings.")},5e3),e7(),console.log("Onboarding complete.")}))},{once:!0});
//# sourceMappingURL=index.5eb5a37a.js.map
