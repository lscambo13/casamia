let e,t,o,n,l,a,s,i,c,r,d,u,m,g;const h="https://x1337x.ws/sort-category-search/",p="https://www.google.com/search?q=",f="https://www.bing.com/search?q=",y="https://duckduckgo.com/?q=",b='["--help","--dl","--clock","--countdown"]',w="./assets/wallpapers/",k={"bg-img-drop":"shown","bg-blur-drop":"off","footer-display-drop":"on","def-widget-drop":"casamia","greeting-display-drop":"on","def-widget-display-drop":"on","def-search-engine-drop":"google","searchbar-position-drop":"middle","searchbar-color-theme-drop":"glass","focus-search-drop":"off","search-display-drop":"on","movies-search-display-drop":"shown","tv-search-display-drop":"shown","games-search-display-drop":"shown","ebooks-search-display-drop":"shown","add-bookmark-display-drop":"shown"},v={show:(a=null,s=null,i=["Input A","Input B"],c="Submit",r="Cancel",d=null,u=[onInput=null,onChange=null],m=null)=>{(e=document.getElementById("inputDialogContainer"))&&e.remove(),document.activeElement.blur(),a=a?`<h3 id="inputDialogTitle" class="modalTitle">${a}</h3>`:"",s=s?`
		<h4 id="inputDialogDescription" class="modalDescription">${s}</h4>
	`:"",document.body.insertAdjacentHTML("afterbegin",`
		<div id="inputDialogContainer" class="modalContainer disable-select">
			<form autocomplete="off" action="#" class="modal">
				${a}
				${s}
				<div id="inputDialogButtonsBar" class="modalButtonsBar">
					<button
					 id="inputDialogSubmitButton"
					 class="mainButton button"
					 disabled = "true"
					 onclick=""
					 type="submit">${c}</button>
					<button
					 id="inputDialogCancelButton"
					 class="button"
					 onclick=""
					 type="button">${r}</button>
				</div>
				<form>
		</div>
	`),i.forEach(e=>{let t=e.replaceAll(" ","-").toLowerCase();t=`MODAL-INPUT-${t}`,document.getElementById("inputDialogButtonsBar").insertAdjacentHTML("beforebegin",`
					<label
					 class="label"
					 for="${t}">${e}</label>
					<input
					 class="modalInputField"
					 type="text"
					 id="${t}">
		`)}),d&&(document.getElementById("inputDialogButtonsBar").insertAdjacentHTML("beforebegin",`
					<label
					 class="label"
					 for="tickBoxField">
						<input
						class="tickBoxField"
						type="checkbox"
						id="tickBoxField">
						<span>${d}</span>
					 </label>
		`),n=document.getElementById("tickBoxField")),e=document.getElementById("inputDialogContainer"),t=document.getElementById("inputDialogSubmitButton"),o=document.getElementById("inputDialogCancelButton"),l=document.getElementsByClassName("modalInputField"),document.body.style.overflow="hidden",l[0].focus(),r||(o.style.display="none");let g=new Promise((a,s)=>{e.style.opacity="1";let i=()=>{o.removeEventListener("click",i),e.remove(),document.body.style.overflow="auto",s(Error(null))},c=()=>{t.removeEventListener("click",c),d&&(n.removeEventListener("change",u[1]),n=n.checked);let o=[];for(let e of l)o.push(e.value),u&&e.removeEventListener("input",u);let s={inputValues:o,checkboxChecked:n};e.remove(),document.body.style.overflow="auto",console.log(s),a(s)};if(o.addEventListener("click",i),t.addEventListener("click",c),u[0])for(let e of l)e.addEventListener("input",u[0]);u[1]&&d&&n.addEventListener("change",u[1])});return m&&m(),g},getSubmitButton:()=>t,getCancelButton:()=>o,getInputFields:()=>l,getCheckboxField:e=>n};function I(e){try{return new URL(e),!0}catch(e){return!1}}const E=(e,t=!1)=>{let o=v.getSubmitButton(),n=v.getInputFields();for(let e of n)if(e.value.length)o.disabled=!1;else{o.disabled=!0;return}t&&(I(n[1].value)?o.disabled=!1:o.disabled=!0)};function B(e){document.documentElement.style.setProperty("--cross-display",e)}let L=JSON.parse(localStorage.getItem("saved_bookmarks"));function S(e,t,o){document.getElementsByClassName("flex-sub-container-horizontal")[0].appendChild(function(e,t,o){let n=document.createElement("span");n.textContent=t,n.className="custom_link_name";let l=document.createElement("div");l.className="cross",l.title="Modify bookmark details",l.setAttribute("tabindex","5");let a=document.createElement("a");return a.className="custom_bookmark clickable",a.setAttribute("href",e),a.setAttribute("id",o),a.setAttribute("tabindex","1"),a.appendChild(n),a.appendChild(l),a}(e,t,o));let n=document.getElementsByClassName("cross");n[n.length-1].addEventListener("click",D)}function C(e,t,o){L.push({link:e,name:t,id:o}),localStorage.setItem("saved_bookmarks",JSON.stringify(L))}function x(e){switch(e){case"show":B("block");break;case"hide":B("none")}}function T(e,t){let o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function D(e){e.preventDefault(),e.stopPropagation();let t=e.target.parentNode,o=function(e){let t=L.filter(t=>e==t.id);return[t[0].id,t[0].name,t[0].link]}(t.id);v.show("Edit bookmark",null,["Name","Address"],"Save","Cancel","Delete this bookmark",[()=>E(e,!0),()=>{let e=v.getCheckboxField(),t=v.getSubmitButton(),o=v.getInputFields();if(e.checked){for(let e of(t.textContent="Delete",t.classList.add("deleteButton"),o))e.disabled=!0;t.disabled=!1}else if(!e.checked)for(let e of(t.textContent="Save",t.classList.remove("deleteButton"),o))e.disabled=!1}],()=>{v.getInputFields()[0].setAttribute("maxlength","4"),v.getInputFields()[0].value=o[1],v.getInputFields()[1].value=o[2]}).then(e=>{if(e.checkboxChecked){var o;o=t.id,L=L.filter(e=>o!=e.id),localStorage.setItem("saved_bookmarks",JSON.stringify(L)),t.style.display="none";return}t.href=e.inputValues[1].replaceAll(" ",""),t.firstChild.innerHTML=e.inputValues[0],function(e,t,o){let n=L.filter(t=>e==t.id);n[0].name=t,n[0].link=o,localStorage.setItem("saved_bookmarks",JSON.stringify(L))}(t.id,e.inputValues[0],e.inputValues[1].replaceAll(" ",""))}).catch(e=>console.log(e))}const $={"bg-img-drop":function(e){let t=document.getElementById("overlay");switch(e){case"hidden":t.style.backgroundColor="rgba(0, 0, 0, 1)";break;case"shown":t.style.backgroundColor="rgba(0, 0, 0, 0.375)"}},"bg-blur-drop":function(e){let t=document.getElementById("overlay");switch(e){case"off":t.style.backdropFilter="blur(0em)";break;case"on":var o;t.style.backdropFilter="blur(1em)",o="overlay",document.getElementById(o).style.backdropFilter="blur(0.9em)",setTimeout(()=>{document.getElementById(o).style.backdropFilter="blur(1em)"},1)}},"footer-display-drop":function(e){let t=document.getElementById("footer");switch(e){case"off":t.classList.add("hidden");break;case"on":t.classList.remove("hidden")}},"def-widget-drop":function(e){function t(e){switch(e){case"show":document.getElementById("update-customtext-btn").classList.remove("nested-close");break;case"hide":document.getElementById("update-customtext-btn").classList.add("nested-close")}}switch(e){case"casamia":t("hide"),ee("off"),N("Casa Mia");break;case"search":t("hide"),ee("off"),N("Search");break;case"clock":t("hide"),ee("on");break;case"custom":let o;ee("off"),t("show"),null==(o=localStorage.getItem("customWidgetText"))&&(localStorage.setItem("customWidgetText","Custom Text"),o=localStorage.getItem("customWidgetText"),M()),N(o)}},"greeting-display-drop":function(e){let t=document.getElementById("subtitle");switch(clearInterval(F),e){case"off":t.classList.add("collapsed");break;case"on":t.classList.remove("collapsed"),et(),F=setInterval(et,2e4)}},"def-widget-display-drop":function(e){let t=document.getElementById("main-heading-slider"),o=document.getElementById("left-arrow"),n=document.getElementById("right-arrow");function l(e){switch(e){case"show":document.getElementById("main-widget-children-container").classList.remove("nested-close");break;case"hide":document.getElementById("main-widget-children-container").classList.add("nested-close")}}switch(e){case"off":t.classList.add("hidden"),o.classList.add("hidden"),n.classList.add("hidden"),l("hide");break;case"on":t.classList.remove("hidden"),o.classList.remove("hidden"),n.classList.remove("hidden"),l("show")}},"def-search-engine-drop":function(e){function t(e){document.getElementById("search-btn-icon").className=e,localStorage.setItem("default-search-icon",e)}function o(e){switch(e){case"show":document.getElementById("update-customdomain-btn").classList.remove("nested-close");break;case"hide":document.getElementById("update-customdomain-btn").classList.add("nested-close")}}switch(e){case"google":o("hide"),O(p),t("fa-brands fa-google");break;case"bing":o("hide"),O(f),t("fa fa-magnifying-glass");break;case"duckduckgo":o("hide"),O(y),t("fa fa-magnifying-glass");break;case"custom":let n;o("show"),null==(n=localStorage.getItem("customDomain"))&&(localStorage.setItem("customDomain",p),n=localStorage.getItem("customDomain"),_()),O(n),t("fa fa-magnifying-glass")}},"searchbar-position-drop":function(e){let t=document.getElementById("searchbar"),o=document.getElementById("autofillContainer"),n=document.getElementById("wrap");switch(sessionStorage.setItem("searchbar-position-drop",e),e){case"top":t.style.order="0",o.style.order="1",o.style.bottom="0em",o.style.top="3.75em",n.style.margin="0 auto auto auto";break;case"bottom":t.style.order="1",o.style.order="0",o.style.bottom="3.75em",o.style.top="",n.style.margin="auto auto 0 auto";break;case"middle":t.style.order="0",o.style.order="1",o.style.bottom="0em",o.style.top="3.75em",n.style.margin="auto auto auto auto"}},"searchbar-color-theme-drop":function(e){let t=document.getElementById("searchContainer");switch(sessionStorage.setItem("searchbar-color-theme-drop",e),e){case"glass":t.classList.add("searchbox-style-glass"),t.classList.remove("searchbox-style-light"),t.classList.remove("searchbox-style-dark");break;case"light":t.classList.remove("searchbox-style-glass"),t.classList.add("searchbox-style-light"),t.classList.remove("searchbox-style-dark");break;case"dark":t.classList.remove("searchbox-style-glass"),t.classList.remove("searchbox-style-light"),t.classList.add("searchbox-style-dark")}},"focus-search-drop":function(e){sessionStorage.setItem("focus",e)},"search-display-drop":function(e){let t=document.getElementById("searchbar"),o=document.getElementById("search-display-children-container"),n=document.getElementById("def-search-engine-drop-container");function l(e){switch(e){case"show":o.classList.remove("nested-close"),n.classList.remove("nested-close");break;case"hide":o.classList.add("nested-close"),n.classList.add("nested-close")}}switch(e){case"off":t.classList.add("hidden"),l("hide");break;case"on":t.classList.remove("hidden"),l("show")}},"movies-search-display-drop":function(e){let t=document.getElementById("movies-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"tv-search-display-drop":function(e){let t=document.getElementById("tv-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"games-search-display-drop":function(e){let t=document.getElementById("games-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"ebooks-search-display-drop":function(e){let t=document.getElementById("ebooks-search");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}},"add-bookmark-display-drop":function(e){let t=document.getElementById("add_bookmark_button");switch(e){case"hidden":t.style.display="none";break;case"shown":t.style.display="flex"}}},A=document.getElementsByClassName("widget-slide");function N(e){for(let t of A)t.textContent=e}function M(){let e=localStorage.getItem("customWidgetText");v.show("Custom widget text","Enter text you want to set as the main widget.",["Custom text"],"Save","Cancel",null,[E,null],()=>{v.getInputFields()[0].value=e}).then(e=>{localStorage.setItem("customWidgetText",e.inputValues[0]),N(e.inputValues[0]),H()}).catch(e=>{console.error(e)})}function _(){let e=localStorage.getItem("customDomain");v.show("Custom widget text","Enter text you want to set as the main widget.",["Custom text"],"Save","Cancel",null,[E,null],()=>{v.getInputFields()[0].value=e}).then(e=>{localStorage.setItem("customDomain",e.inputValues[0]),O(e.inputValues[0]),V()}).catch(e=>{console.error(e)})}let F=null;function O(e){localStorage.setItem("default-search-url",e)}function j(){for(let e of Object.entries(JSON.parse(localStorage.getItem("advDropdownValues")))){let t=$[e[0]];t&&t(e[1])}P(),H(),V();let e=sessionStorage.getItem("input");e&&(document.getElementById("searchTerm").value=e)}function P(){document.getElementById("update-username-btn-preview").textContent=localStorage.getItem("userName")}function H(){document.getElementById("update-customtext-btn-preview").textContent=localStorage.getItem("customWidgetText")}function V(){document.getElementById("update-customdomain-btn-preview").textContent=localStorage.getItem("customDomain")}const J=`The command you have passed is invalid.

Type --help to read the documentation.
`,W=`This will reset bookmarks.
Make sure you have a backup to import later on.


Are you sure ?`,q=`This will reset everything.
There is no going back.

Are you sure?`;function U(e){return 1==e.length&&(e="0"+e),e}const R={show:(e=null,t=null,o=["Submit A","Submit B"],n="Ok",l=[null,null],r=[],d=null)=>{(a=document.getElementById("alertDialogContainer"))&&a.remove(),e=e?`<h3 id="alertDialogTitle" class="modalTitle">${e}</h3>`:"",t=t?`
		<h4 id="alertDialogDescription" class="modalDescription">${t}</h4>
	`:"",document.body.insertAdjacentHTML("afterbegin",`
		<div id="alertDialogContainer" class="modalContainer disable-select">
			<div class="modal">
				${e}
				${t}
				<div id="alertDialogButtonsBar" class="modalButtonsBar">
					<button
					 id="alertDialogCancelButton"
					 class="button"
					 onclick=""
					 type="button">${n}</button>
				</div>
			</div>
		</div>
	`),o&&o.forEach(e=>{let t=e.replaceAll(" ","-").toLowerCase();t=`ALERT-BUTTON-${t}`,document.getElementById("alertDialogButtonsBar").insertAdjacentHTML("afterbegin",`
			<button
			id="${t}"
			class="alertDialogSubmitButton button">
			${e}</button>
			`)}),l[0]&&(document.getElementById("alertDialogButtonsBar").insertAdjacentHTML("beforebegin",`
					<label
					 class="label"
					 for="tickBoxField">
						<input
						class="tickBoxField"
						type="checkbox"
						id="tickBoxField">
						<span>${l[0]}</span>
					 </label>
		`),i=document.getElementById("tickBoxField")),a=document.getElementById("alertDialogContainer"),s=document.getElementById("alertDialogCancelButton"),c=document.getElementsByClassName("alertDialogSubmitButton"),document.body.style.overflow="hidden",s.focus();let u=new Promise((e,t)=>{a.style.alignItems="center",a.style.opacity="1";let o=()=>{s.removeEventListener("click",o),l[0]&&(i.removeEventListener("change",l[1]),i=i.checked),r&&r.forEach((e,t)=>{c[t].removeEventListener("click",e)}),a.remove(),document.body.style.overflow="auto",e(i)};s.addEventListener("click",o),r&&r.forEach((e,t)=>{c[t].addEventListener("click",e)}),l[0]&&i.addEventListener("change",l[1])});return d&&d(),u},getCancelButton:()=>s,getSubmitButtons:()=>c,getCheckboxField:()=>i},Y=(e,t)=>{R.show(e,t,null,"Ok",[null,null],null,null).then(e=>console.log(e)).catch(e=>console.error(e))};function z(e,t){let o=document.getElementById("gradient_overlay"),n=document.getElementById("wallpapers"),l=localStorage.getItem("glow");null!=t&&"1"!=l&&(o.style.opacity=t),null!=e&&(n.style.background=`linear-gradient(to top, rgb(${e}), 50%, #fbd3e900)`,o.style.background=`linear-gradient(to top, rgb(${e}), 50%, #fbd3e900)`)}let G=[];function K(e,t){r=e,document.getElementById("overlay").style.backdropFilter="blur(1em)";let o=new Image;o.src=w+e,o.onload=e=>{Q(r),localStorage.setItem("wallpaper",r),j()},z(t),function(e){let t=document.getElementsByClassName("has-shadow");for(let o=0;o<t.length;o++)t[o].style.textShadow=`4px 4px 0 rgba(${e},.85), 6px 6px 0px black`}(t),document.documentElement.style.setProperty("--selection-color",`rgba(${t}, .5)`),Q(e.split(".").join("-thumb."))}function Q(e){document.body.style.backgroundImage="url("+w+e+")",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize="cover",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundPosition="center"}function X(){for(let e of document.getElementsByClassName("thumb-group")){let t=e.getElementsByClassName("thumbnail")[0],o=e.getElementsByClassName("thumb-title")[0];e.classList.add("animate"),t.src.replace("-thumb","").includes(r)?(o.style.opacity="1",e.classList.remove("animate"),e.classList.add("highlighted")):(o.style.opacity="0",e.classList.add("animate"),e.classList.remove("highlighted"))}}let Z=null;function ee(e){switch(e){case"off":clearInterval(Z),Z=null;break;case"on":Z&&clearInterval(Z),Z=setInterval(()=>(function(e){let t=document.getElementsByClassName(e),o=new Date,n=o.getHours(),l=e=>0==e?(n.toString(),n="12","AM"):e>0&&e<12?(n=U(n.toString()),"AM"):12==e?(n="12","PM"):e>12?((n-=12).toString(),n=U(n),"PM"):void 0,a=U(o.getMinutes().toString()),s=U(o.getSeconds().toString());l=l(n);let i=":";for(let e=0;e<t.length;e++)i=s%2==0?'<span class="separator separator-visible">:</span>':'<span class="separator">:</span>',t[e].innerHTML=`${n}${i}${a} ${function(e){let t=localStorage.getItem("selected-widget-style");return"widget-2"==t||"widget-7"==t||"widget-5"==t?e.toLowerCase():e}(l.toString())}`})("widget-slide"),1e3)}}function et(){let e=document.getElementById("subtitle"),t=localStorage.getItem("userName"),o=new Date().getHours(),n=e=>e<12?`Good Morning, ${t}`:e>=12&&e<=18?`Good Afternoon, ${t}`:e>=18?`Good Evening, ${t}`:void 0;n=n(o),e.innerText=n}function eo(e,t=""){let o;e?(e.stopPropagation(),o=e.target.files[0].text()):o=t,o.then(function(t){let o=JSON.parse(t);if(!o[0]?.id){console.log(o),Y("Failed","The backup does not seem to be valid."),e.target.value=null;return}let n=[];for(let e of L)n.push(e.id);for(let e of o)n.includes(e.id)&&(function(e){let t=Date.now(),o=t+1;for(;t<o;)t=Date.now()}(0),e.id=Date.now()),n.push(e.id),C(e.link,e.name,e.id);window.location.reload()})}function en(e){confirm(W)&&(localStorage.removeItem("saved_bookmarks"),window.location.reload())}function el(e){confirm(q)&&(localStorage.clear(),window.location.reload())}function ea(){return document.getElementsByClassName("searchTerm")[0]}function es(e,t,o){if(null!=t)return document.getElementById(e).addEventListener(t,o,{passive:!0})}function ei(e,t,o){let n=document.getElementsByClassName(e);for(let e=0;e<n.length;e++)n[e].addEventListener(t,o)}function ec(e){("Enter"===e.key||" "===e.key)&&e.target.click()}function er(){fetch("./assets/samples/bookmarks.json").then(e=>eo(null,e.text()))}function ed(e){let t=document.getElementsByClassName("arrows");switch(e){case"show":for(let e=0;e<t.length;e++)t[e].style.height="2em";break;case"hide":for(let e=0;e<t.length;e++)t[e].style.height="0em"}}function eu(e,t){let o;let n=document.getElementById("main-heading-slider"),l=n.scrollWidth,a=document.getElementsByClassName(e),s=n.scrollLeft,i=n.scrollWidth/a.length;1==t?((o=s+i)>l&&(o=l),console.log(o),n.scrollLeft=o):-1==t&&((o=s-i)<0&&(o=0),console.log(o),n.scrollLeft=o)}const em=document.getElementById("downloadContainer"),eg=()=>{em.classList.remove("hidden")},eh=e=>{document.getElementById("progress-bar").classList.add("hidden"),document.getElementById("downloadContainerTitle").classList.remove("hidden"),em.insertAdjacentHTML("beforeend",`
	<div class="downloadItemContainer">
		<span>${e}</span>
	</div>
	`)},ep=(e,t,o,n)=>{document.getElementById("progress-bar").classList.add("hidden"),document.getElementById("downloadContainerTitle").classList.remove("hidden"),em.insertAdjacentHTML("beforeend",`
		<div class="downloadItemContainer">
			<img src="${o}" alt="Thumbnail" class="downloadItemThumbnail">
			<div class="downloadInfoContainer">
				<span class="downloadItemTitle">${e}</span>
				<div>
					<span class="downloadItemResolution">${n}</span>
					<a href="${t}" class="downloadButton button">Download</a>
				</div>
			</div>
		</div>
	`);let l=document.getElementsByClassName("downloadButton");l[l.length-1].addEventListener("click",()=>{let o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log("clicked")})},ef=document.getElementById("notifyContainer"),ey={show:(e,t="5000",o=null)=>{let n=Date.now();(m=document.getElementById(`notifyModal-${n}`))&&m.parentNode.remove(),ef.insertAdjacentHTML("afterbegin",`
		<div id="notifyModal-${n}" class="notifyModal">
			<div class="notifyDescriptionContainer">
				<h3 id="notifyDescription-${n}" class="notifyDescription">
					${e}
				</h3>
				<hr id="notifyLoader-${n}" class="notifyLoader">
			</div>	
			<button id="notifyDialogCancelButton-${n}" class="button tinyButton">
				x
			</button>
		</div>
	`);let l=document.getElementById(`notifyLoader-${n}`);m=document.getElementById(`notifyModal-${n}`),o&&m.addEventListner("click",o);let a=e=>{o&&m.removeEventListner("click",o),u.removeEventListener("click",a),e.target.parentNode.remove()};(u=document.getElementById(`notifyDialogCancelButton-${n}`)).addEventListener("click",a),setTimeout(()=>{let e=u;setTimeout(()=>{e.click()},t),l.style.transition=t+"ms",m.style.opacity="1",m.style.marginTop="2em",l.style.width="0%"},50)}};function eb(e){return!!e.startsWith("--")}function ew(e,t){let o=t.substr(4);(o=o.split(",")).forEach(t=>{if(null==window.open(`${e}${t}`,"_blank")){Y("Information","Allow pop-ups for this feature to work properly.");return}})}const ek="You must enter a search query to continue.",ev=document.querySelector(".autofillContainer"),eI=document.querySelector("#searchBarFocusMode");let eE="",eB=[];window.googleSuggestions=e=>{eB=[];let t=ea().value;eB=e[1],t&&(eD(t,eB),ex(t))};const eL=e=>{""!==eE&&document.body.removeChild(eE),(eE=document.createElement("script")).src=`https://suggestqueries.google.com/complete/search?client=firefox&callback=googleSuggestions&q=${e}`,document.body.appendChild(eE)},eS=e=>{let t=document.getElementById("search-btn-icon"),o=localStorage.getItem("default-search-icon");if(I(e)){t.className="fa fa-globe";return}if(eb(e)){t.className="fa fa-terminal";return}t.className=o},eC=()=>{eI.style.opacity="0",ev.style.paddingBlock="0em",ev.style.height="0px",setTimeout(()=>{eI.style.display="none"},200)},ex=e=>{let t=document.querySelectorAll(".autofillItem"),o=document.getElementById("searchbar");e.length&&(eI.style.display="block",setTimeout(()=>{if(t.length){let e=t[0].getBoundingClientRect(),n=e.height*t.length+1.5*e.height;ev.style.height=`${n}px`,ev.style.paddingBlockStart="0em",o.scrollIntoView()}eI.style.opacity="1"},1))},eT=()=>{document.querySelectorAll(".autofillItem").forEach(e=>{e.remove()})},eD=(e,t)=>{e=e.toLowerCase();let o=JSON.parse(localStorage.getItem("autocompleteDatabase"));function n(e){ea().value=e.target.innerHTML;let t=new InputEvent("input");ea().dispatchEvent(t),ea().focus()}o||localStorage.setItem("autocompleteDatabase",b),(o=>{if(eT(),!e)return;let n=sessionStorage.getItem("searchbar-color-theme-drop");"bottom"==sessionStorage.getItem("searchbar-position-drop")?ev.style.flexDirection="column-reverse":ev.style.flexDirection="column";let l=0;for(let e of o){if(6==l)break;ev.insertAdjacentHTML("beforeend",`
				<span 
                    class="autofillItem disable-select searchbox-style-${n}"
                    tabindex="1" title="${e}">${e}</span>
            `),l++}for(let e of t){if(10==l)break;ev.insertAdjacentHTML("beforeend",`
        		<span 
                    class="autofillItem disable-select searchbox-style-${n}"
                    tabindex="1" title="${e}">${e}</span>
            `),l++}})(o.filter(t=>{if(t!=e)return t.toLowerCase().includes(e)})),document.querySelectorAll(".autofillItem").forEach(e=>{e.addEventListener("click",n),e.addEventListener("keydown",ec)})},e$=e=>{let t=JSON.parse(localStorage.getItem("autocompleteDatabase")),o=new Set(t);o.add(e.toLowerCase());let n=Array.from(o);localStorage.setItem("autocompleteDatabase",JSON.stringify(n))};let eA=null;function eN(){eA&&eA.classList.toggle("loader"),eA=null}function eM(e){e.stopPropagation(),eN();let t=e.target;eA=t,t.classList.toggle("loader")}function e_(){let e=localStorage.getItem("userName");if(e){v.show("Update your name","Maximum length allowed is 17 characters.",["Change name to"],"Update","Cancel",null,[E,null],()=>{v.getInputFields()[0].setAttribute("maxlength",17),v.getInputFields()[0].value=e}).then(t=>{e=t.inputValues[0],localStorage.setItem("userName",e),P(),et()}).catch(e=>{console.error(e)});return}if(!e){let t=v.show("Welcome to Casa Mia",`Hi! We are so excited to see you here.
            Please fill out the following details before moving forward. `,["Your name"],"Proceed",null,null,[E,null],()=>{v.getInputFields()[0].setAttribute("maxlength",17)});return t.then(t=>{e=t.inputValues[0],localStorage.setItem("userName",e),localStorage.setItem("onBoarding","1")}).catch(e=>{console.error(e)}),t}}function eF(){let e=document.getElementsByTagName("select"),t={};for(let o of e)t[o.id]=o.value;localStorage.setItem("advDropdownValues",JSON.stringify(t)),j()}function eO(e){document.documentElement.style.setProperty("--blur-one-em",`blur(${e}em)`),document.documentElement.style.setProperty("--blur-one-px",`blur(${e}px)`)}let ej=!1;function eP(){let e=new Date;11==e.getMonth()&&e.getDate()>17&&32>e.getDate()&&function(){ej=!0;var e=document.getElementById("canvasFar"),t=e.getContext("2d"),o=window.innerWidth,n=window.innerHeight;e.width=o,e.height=n;for(var l=[],a=0;a<50;a++)l.push({x:Math.random()*o,y:Math.random()*n,r:4*Math.random()+1,d:50*Math.random()});t.fillStyle="rgba(255, 255, 255, 0.5)",e.style.display="block",ej=!1,window.requestAnimationFrame(function e(){t.clearRect(0,0,o,n),t.beginPath();for(var a=0;a<50;a++){var s=l[a];t.moveTo(s.x,s.y),t.arc(s.x,s.y,s.r,0,2*Math.PI,!0)}t.fill(),function(){for(var e=0;e<50;e++){var t=l[e];t.y+=Math.cos(t.d)+1+t.r/10,(t.x>o+5||t.x<-5||t.y>n)&&e%3>0&&(l[e]={x:Math.random()*o,y:-10,r:t.r,d:t.d})}}(),ej||window.requestAnimationFrame(e)})}()}const eH=document.getElementById("wallpapers"),eV=document.getElementById("wrap"),eJ=document.getElementById("toggle-labs-btn"),eW=document.getElementById("advanced-settings-modal"),eq=document.getElementById("advanced-settings-modal-background-overlay");let eU=!1,eR=!1;const eY=e=>{switch(eN(),e){case"close":document.title=document.title.replace("Backgrounds","Search"),history.pushState({loc:"home"},"","?home"),eH.classList.remove("animation_slide_up"),setTimeout(()=>eJ.classList.remove("advanced-settings-button-right"),350),eH.classList.add("animation_slide_down"),eV.classList.remove("animation2_slide_up"),eV.classList.add("animation2_slide_down"),clearTimeout(g),x("hide"),ed("hide"),z(null,0),setTimeout(()=>eO(1),400),eR=!1;break;case"open":eH.style.display="flex",eO(0),eH.classList.remove("animation_slide_down"),eH.classList.add("animation_slide_up"),eV.classList.remove("animation2_slide_down","startup_slide_down"),eV.classList.add("animation2_slide_up"),setTimeout(()=>{eJ.classList.add("advanced-settings-button-right"),function(){let e=document.getElementsByClassName("highlighted")[0];setTimeout(()=>{e&&e.scrollIntoView({inline:"center"})},10)}()},350),z(null,1),g=setTimeout(()=>x("show"),450),ed("show"),document.title=document.title.replace("Search","Backgrounds"),history.pushState({loc:"backgrounds"},"","?backgrounds"),eR=!0}};function ez(){eY("close"),history.pushState({loc:"settings"},"","?settings"),setTimeout(()=>eO(0),420),document.title=document.title.replace("Search","Settings"),document.body.classList.add("justifySpaceBetween"),eV.style.display="none",eW.style.display="block",eq.style.display="block",eU=!0}function eG(){document.title=document.title.replace("Settings","Search"),history.pushState({loc:"home"},"","?home"),document.body.classList.remove("justifySpaceBetween"),eV.style.display="block",eW.style.display="none",eq.style.display="none",setTimeout(()=>eO(1),100),eU=!1}window.createNewBookmark=()=>{let e=`
	You may only use upto four letters as the bookmark name.`;v.show("Add new bookmark",e,["Bookmark name","Link to website"],"Save",void 0,null,[()=>E(null,!0),null],()=>{let e=v.getInputFields()[0];e.setAttribute("maxlength",4),e.setAttribute("placeholder","e.g. YT");let t=v.getInputFields()[1];t.setAttribute("placeholder","e.g. youtube.com"),t.value="https://",navigator.clipboard.readText().then(e=>{I(e)&&(t.value=e.replaceAll(" ",""))}).catch(e=>{console.log(e)})}).then(e=>{let t=Date.now(),o=e.inputValues[0],n=e.inputValues[1].replaceAll(" ","");n.startsWith("http")||(n=`https://${n}`),S(n,o,t),C(n,o,t)}).catch(e=>console.log(e))},window.changeWallpaper=e=>{var t;e.stopPropagation();let o=e.target.title;o||(o=e.target.childNodes[1].title);let n=(t=o,[G.filter(e=>e.title==t)[0].file,G.filter(e=>e.title==t)[0].color[1]]);K(n[0],n[1]),X()},es("export-bookmarks-btn","click",function(e){e.stopPropagation();let t=localStorage.saved_bookmarks,o=new Date;T(`casamia-bookmarks-only-${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}.json`,t)}),es("import-bookmarks-btn","change",eo),es("export-backup-btn","click",function(e){e.stopPropagation();let t=JSON.stringify({...localStorage}),o=new Date;T(`casamia-full-backup-${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}.json`,t)}),es("import-backup-btn","change",function(e,t=""){let o;e?(e.stopPropagation(),o=e.target.files[0].text()):o=t,o.then(function(t){let o=JSON.parse(t);if(o.onBoarding){let e=Object.keys(o);e.forEach((t,n)=>{localStorage.setItem(t,o[e[n]])}),window.location.reload()}else console.log(o),Y("Failed","The backup does not seem to be valid."),e.target.value=null})}),es("download-wallpaper-btn","click",function(){let e=document.createElement("a"),t=function(e,t){let o=e.split(".");return o[o.length-1]="png",o.join(".")}(r,0);e.setAttribute("href","./assets/wallpapers-hi-res/"+t),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}),es("toggle-favicons-btn","click",function(e){let t=document.getElementsByClassName("custom_bookmark"),o=document.getElementsByClassName("custom_link_name");for(let e=0;e<t.length;e++){o[e].style.display="none";let n=document.createElement("img");n.className="ext_favicon";let l=t[e].href;n.src="http://www.google.com/s2/favicons?sz=32&domain="+l,t[e].appendChild(n)}}),es("update-username-btn","click",e_),es("update-customtext-btn","click",M),es("deep-search-btn","click",e=>{!function(e){document.getElementById(e).classList.toggle("nested-close")}("deep-search-nested");let t=document.getElementById("deep-search-btn-arrow");t.classList.toggle("fa-angle-down"),t.classList.toggle("fa-angle-up")}),es("update-customdomain-btn","click",_),es("fetch-bookmarks-btn","click",er),es("reset-bookmarks-btn","click",en),es("reset-all-btn","click",el),es("modal-close-btn","click",eG),es("toggle-labs-btn","click",ez),es("search-btn","click",function(){let e=ea().value;if(""!=e){if(e$(e),I(e)&&!e.includes(" ")){window.open(e,"_self");return}if(eb(e))!function(e){let t=e.toLowerCase();switch((e=(e=e.split("--").join("")).split(" "))[0].toLowerCase()){case"help":window.open("/pages/help/index.html","_self");break;case"reset":"bookmarks"==e[1]?en():"all"==e[1]?el():Y("Error",J);break;case"fetch":"default"==e[1]?er():Y("Error",J);break;case"dl":if(e[1]){var o;o=e[1],eg(),fetch(`https://casamia.cambo.in/api/dl/?url=${o}`).then(e=>{if(200!==e.status){ey.show(`Error ${e.status} ${e.statusText}`);return}if(200!==e.status){e.json().then(e=>{eh(e)});return}e.json().then(e=>{console.log(e),e.forEach(e=>{ep(e.title,e.url,e.thumb,e.res)});let t=()=>{document.getElementById("downloadContainer").classList.add("hidden"),document.getElementsByClassName("downloadItemContainer"),document.getElementById("downloadContainer-close-btn").removeEventListener("click",t)};es("downloadContainer-close-btn","click",t)})})}else Y("Failed","Enter a valid YT address");break;case"clock":window.open("./pages/clock","_self");break;case"count":window.open("./pages/countdown","_self");break;case"g":ew(p,t);break;case"b":ew(f,t);break;case"d":ew(y,t);break;default:Y("Error",J)}}(e);else{let t;e=encodeURIComponent(e);let o=(null==(t=localStorage.getItem("default-search-url"))&&(localStorage.setItem("default-search-url",p),t=localStorage.getItem("default-search-url")),t+e);window.open(o,"_self")}}else ey.show(ek)}),es("movies-search","click",function(){let e=ea().value;if(""!=e){let t=h+(e=encodeURIComponent(e))+"/Movies/time/desc/1/";window.open(t)}else ey.show(ek)}),es("tv-search","click",function(){let e=ea().value;if(""!=e){let t=h+(e=encodeURIComponent(e))+"/TV/size/desc/1/";window.open(t)}else ey.show(ek)}),es("games-search","click",function(){let e=ea().value;if(""!=e){let t=h+(e=encodeURIComponent(e))+"/Games/time/desc/1/";window.open(t)}else ey.show(ek)}),es("ebooks-search","click",function(){let e=ea().value;if(""!=e){let t=h+(e=encodeURIComponent(e))+"/Other/seeders/desc/1/";window.open(t)}else ey.show(ek)}),es("searchTerm","input",function(e){let t=sessionStorage.getItem("input"),o=e.target.value;if(sessionStorage.setItem("input",o),eS(o),!o){eT(),setTimeout(()=>{eC()},1);return}ex(o),o!=t&&eL(o)}),es("searchTerm","click",()=>{let e=new InputEvent("input");ea().dispatchEvent(e)}),es("searchBarFocusMode","click",eC),es("searchTerm","keypress",function(e){"Enter"==e.key&&document.querySelector("#search-btn").click()}),es("fetch-bookmarks-btn","click",er),es("left-arrow","click",e=>{e.stopPropagation(),eu("widget-slide",-1)}),es("right-arrow","click",e=>{e.stopPropagation(),eu("widget-slide",1)}),window.addEventListener("resize",()=>{j(),eP()}),window.addEventListener("blur",()=>{eN()}),window.addEventListener("appinstalled",e=>{console.log("installed")}),onload=e=>{document.getElementById("main-heading-slider").classList.remove("nowrap")},es("settings_button","click",e=>{eR?eY("close",e):eR||eY("open",e)});const eK=()=>{let e;let t=document.body,o=()=>{clearInterval(e),e=null},n=t=>{["gradient_overlay","wrap","bookmarks","autofillContainer","flex-main-container-vertical","subtitle","footer"].includes(t.target.id)&&(e=setInterval(()=>{eR?eY("close"):eR||eY("open"),o()},eR?1:250))};return t.addEventListener("mousedown",n),t.addEventListener("mouseup",o),t.addEventListener("mouseout",o),t.addEventListener("touchstart",n),t.addEventListener("touchend",o),t.addEventListener("touchcancel",o),()=>{t.removeEventListener("mousedown",n),t.removeEventListener("mouseup",o),t.removeEventListener("mouseout",o),t.removeEventListener("touchstart",n),t.removeEventListener("touchend",o),t.removeEventListener("touchcancel",o),console.log("un-focuss",e)}},eQ=()=>{window.addEventListener("popstate",e=>{eR?eY("close"):eU?eG():eR||eU||(history.go(-1),console.log("cant go back anymore",-history.length-1))});let e=window.location.href;(e=e.split("/?")[1])?"settings"==e?ez():"backgrounds"==e&&eY("open"):history.pushState({loc:"home"},"","?home")},eX=()=>{let e;let t=document.getElementById("btn-install");j(),function(){if(null==L){L=[];return}for(let e of L)S(e.link,e.name,e.id)}(),function(){for(let e of Object.entries(JSON.parse(localStorage.getItem("advDropdownValues")))){let t=document.getElementById(e[0]);t&&(t.value=e[1])}}(),eV.style.opacity=1,fetch(w+"wallpapers_list.json").then(e=>{e.text().then(e=>{G=JSON.parse(e),r=localStorage.getItem("wallpaper"),d=G.filter(e=>e.file==r)[0].color[1],K(r,d),function(){let e=document.getElementById("wallpapers");for(let t of G){let o=t.file;o=o.split(".").join("-thumb.");let n=document.createElement("div");n.className="thumb-group",n.setAttribute("onclick","changeWallpaper(event)"),n.setAttribute("onkeypress","click_to_enter(event)"),n.setAttribute("tabindex","3");let l=document.createElement("div");l.innerHTML=t.title,l.className="thumb-title",n.appendChild(l);let a=document.createElement("img");a.src=w+o,a.className="thumbnail",a.title=t.title,a.setAttribute("draggable","false"),n.appendChild(a),e.appendChild(n)}}(),X()})}).catch(e=>{console.log(e),window.open("./pages/error","_self")}),X(),eK(),ei("clickable","keypress",ec),ei("custom_bookmark","click",eM),function(e,t,o){let n=document.getElementsByTagName(e);for(let e=0;e<n.length;e++)n[e].addEventListener(t,o)}("select","change",eF),es("btn-install","click",t=>{e.prompt(),e.userChoice.then(t=>{"accepted"===t.outcome&&console.log("user accepted prompt"),e=null})}),window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),e=o,t.style.display="block"}),"1"==document.getElementById("searchbar").style.order&&window.scrollTo(0,document.body.scrollHeight),"on"==sessionStorage.getItem("focus")&&(document.getElementById("searchTerm").focus(),document.getElementById("searchTerm").click()),function(e){fetch("https://api.github.com/repos/lscambo13/casamia/commits/HEAD").then(t=>{t.json().then(t=>{let o=new Date(t.commit.committer.date).toISOString();o=(o=o.slice(0,o.length-5)).replaceAll("T","-").replaceAll(":","").replaceAll("-","."),document.getElementById(e).innerHTML=`Version ${o}`}).catch(e=>{console.error("getLastUpdated",e)})}).catch(e=>{console.error("getLastUpdated",e)})}("version-preview"),eP(),document.getElementById(localStorage.getItem("selected-widget-style")).scrollIntoView(),setTimeout(()=>{!function(e,t){let o=document.getElementsByClassName(t),n={root:document.getElementById(e),rootMargin:"0px",threshold:.5},l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&localStorage.setItem("selected-widget-style",e.target.id)})},n);for(let e of o)l.observe(e)}("main-heading-slider","widget-slide")},500),eQ()};document.addEventListener("DOMContentLoaded",()=>{"1"==localStorage.getItem("onBoarding")?(eX(),console.log("Already onboard.")):(console.log("Onboarding..."),(function(){let e=e_();return localStorage.setItem("onBoarding","0"),localStorage.setItem("advDropdownValues",JSON.stringify(k)),localStorage.setItem("wallpaper","085.webp"),localStorage.setItem("autocompleteDatabase",b),localStorage.setItem("selected-widget-style","widget-1"),e})().then(()=>{window.matchMedia("(hover: none)").matches&&setTimeout(()=>{Y("Information","Press and hold on empty area to open settings.")},5e3),eX(),console.log("Onboarding complete.")}))},{once:!0});
//# sourceMappingURL=index.461e974e.js.map
